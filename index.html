<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lamb Calculator</title>
  <link rel="icon" type="image/png" href="mirror/ai_lamb.png">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
    }

    @font-face {
      font-family: 'Tiempos Headline';
      src: url('mirror/Typeface/test-tiempos-headline-regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Tiempos Fine Light';
      src: url('mirror/test-tiempos-fine-light.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    .header-logo {
      position: absolute;
      top: 40px;
      left: 50px;
      z-index: 10;
    }

    .header-logo img {
      width: 140px;
      height: auto;
      display: block;
    }

    .header-button {
      position: absolute;
      top: 40px;
      right: 50px;
      z-index: 10;
    }

    .header-button a {
      display: inline-block;
      padding: 12px 24px;
      background: #5f3921;
      color: #ffffff;
      text-decoration: none;
      border-radius: 4px;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .header-button a:hover {
      background: #4a2c18;
      transform: translateY(-2px);
    }

    .lamb-calculator-wrapper {
      background: url('LC_background_web.png') center center / cover no-repeat;
      padding: 120px 20px;
      margin: 0;
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .lamb-calculator-header {
      max-width: 900px;
      margin: 0 auto 60px auto;
      text-align: center;
    }

    .lamb-icon-wrapper {
      width: 150px;
      height: 150px;
      margin: 0 auto 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .lamb-icon-glow {
      display: none;
    }

    .lamb-icon {
      width: 150px;
      height: 150px;
      animation: glow-rotate 3s ease-in-out infinite;
    }

    @keyframes glow-rotate {
      0% {
        filter: drop-shadow(0 0 15px rgba(255, 140, 60, 1))
                drop-shadow(0 0 30px rgba(255, 140, 60, 0.8))
                drop-shadow(0 0 50px rgba(255, 165, 80, 0.6));
      }
      33% {
        filter: drop-shadow(0 0 20px rgba(255, 165, 80, 1))
                drop-shadow(0 0 40px rgba(255, 165, 80, 0.9))
                drop-shadow(0 0 60px rgba(255, 140, 60, 0.7));
      }
      66% {
        filter: drop-shadow(0 0 18px rgba(255, 180, 100, 1))
                drop-shadow(0 0 35px rgba(255, 180, 100, 0.9))
                drop-shadow(0 0 55px rgba(255, 140, 60, 0.6));
      }
      100% {
        filter: drop-shadow(0 0 15px rgba(255, 140, 60, 1))
                drop-shadow(0 0 30px rgba(255, 140, 60, 0.8))
                drop-shadow(0 0 50px rgba(255, 165, 80, 0.6));
      }
    }

    .lamb-calculator-title {
      font-family: 'Tiempos Fine Light', sans-serif;
      font-size: 56px;
      font-weight: normal;
      letter-spacing: -0.5px;
      color: #e8dcc8;
      margin: 0;
      line-height: 1.1;
    }

    .lamb-calculator-container {
      max-width: 500px;
      margin: 0 auto;
      background: linear-gradient(180deg, #a67c52 0%, #e8dcc8 100%);
      border-radius: 20px;
      padding: 40px 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3), 0 0 60px rgba(255, 157, 77, 0.4);
      position: relative;
      border: 3px solid transparent;
      background-clip: padding-box;
      animation: glow-pulse 2s ease-in-out infinite;
    }

    @keyframes glow-pulse {
      0%, 100% {
        box-shadow:
          0 0 8px rgba(117, 63, 26, 0.4),
          0 0 15px rgba(117, 63, 26, 0.2),
          inset 0 0 8px rgba(166, 124, 82, 0.1);
        border-color: #8b5a3c;
      }
      50% {
        box-shadow:
          0 0 12px rgba(166, 124, 82, 0.5),
          0 0 20px rgba(166, 124, 82, 0.3),
          inset 0 0 10px rgba(166, 124, 82, 0.15);
        border-color: #a67c52;
      }
    }

    .calculator-input-group {
      margin-bottom: 25px;
    }

    .calculator-label {
      font-family: 'Tiempos Fine Light', sans-serif;
      font-size: 24px;
      color: #ffffff;
      font-weight: normal;
      display: block;
      margin-bottom: 15px;
      text-align: center;
    }

    .calculator-slider-container {
      position: relative;
      margin-bottom: 30px;
      background: transparent;
      border-radius: 0;
      padding: 0;
      overflow: visible;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .calculator-slider-fill {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      height: 54px;
      background: #553026;
      border-radius: 50px 0 0 50px;
      pointer-events: none;
      z-index: 0;
      transition: width 0.1s ease;
    }

    .calculator-slider {
      width: 100%;
      max-width: 500px;
      margin: 25px auto;
      height: 54px;
      border-radius: 50px;
      background: #e8dcc8;
      outline: none;
      -webkit-appearance: none;
      position: relative;
      cursor: pointer;
      padding: 0;
      z-index: 1;
      display: block;
    }

    .calculator-slider::-webkit-slider-runnable-track {
      width: 100%;
      height: 54px;
      background: transparent;
      border-radius: 50px;
    }

    .calculator-slider::-moz-range-track {
      width: 100%;
      height: 54px;
      background: transparent;
      border-radius: 50px;
    }

    .calculator-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: #f5f0e8;
      cursor: grab;
      border: 2px solid #5f3921;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      margin-top: 0;
    }

    .calculator-slider::-webkit-slider-thumb:active {
      cursor: grabbing;
    }

    .calculator-slider::-moz-range-thumb {
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: #f5f0e8;
      cursor: grab;
      border: 2px solid #5f3921;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .calculator-slider::-moz-range-thumb:active {
      cursor: grabbing;
    }

    .calculator-value-display {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translate(-50%, -50%);
      width: 54px;
      height: 54px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Poppins', sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: #5f3921;
      pointer-events: none;
      z-index: 10;
      line-height: 1;
      text-align: center;
    }

    .hunger-level-label {
      font-family: 'Tiempos Fine Light', sans-serif;
      font-size: 24px;
      color: #ffffff;
      font-weight: normal;
      display: block;
      margin-bottom: 10px;
      text-align: center;
    }

    .hunger-level-buttons {
      position: relative;
      display: flex;
      background: #e8dcc8;
      border-radius: 50px;
      padding: 6px;
      max-width: 500px;
      margin: 0 auto;
    }

    .hunger-level-buttons::before {
      content: '';
      position: absolute;
      top: 6px;
      left: 6px;
      width: calc(33.333% - 6px);
      height: calc(100% - 12px);
      background: #5f3921;
      border-radius: 50px;
      transition: transform 0.3s ease;
      z-index: 0;
    }

    .hunger-level-buttons[data-active="snack"]::before {
      transform: translateX(0);
    }

    .hunger-level-buttons[data-active="regular"]::before {
      transform: translateX(calc(100% + 3px));
    }

    .hunger-level-buttons[data-active="big"]::before {
      transform: translateX(calc(200% + 6px));
    }

    .hunger-level-btn {
      flex: 1;
      padding: 12px 16px;
      background: transparent;
      border: none;
      border-radius: 50px;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      color: #553026;
      cursor: pointer;
      transition: color 0.3s ease;
      font-weight: 400;
      position: relative;
      z-index: 1;
    }

    .hunger-level-btn.active {
      color: #ffffff;
      font-weight: 500;
    }

    .calculator-button {
      width: 100%;
      padding: 16px;
      background: #5f3921;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 25px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .calculator-button:hover {
      background: #4a2c18;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(95, 57, 33, 0.3);
    }

    .calculator-reset {
      width: 100%;
      padding: 12px;
      background: transparent;
      color: #553026;
      border: none;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      cursor: pointer;
      margin-top: 10px;
      text-decoration: underline;
      opacity: 0.7;
      transition: opacity 0.3s ease;
    }

    .calculator-reset:hover {
      opacity: 1;
    }

    .results-section-wrapper {
      background: #e8dcc8;
      padding: 60px 20px;
      margin: 0;
      display: none;
    }

    .results-section-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .results-title {
      font-family: 'Tiempos Fine Light', sans-serif;
      font-size: 42px;
      color: #553026;
      margin: 0 0 40px 0;
      text-align: center;
      font-weight: 300;
    }

    .results-recommendation {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .result-card {
      background: #d5cab8;
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }

    .result-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .result-card-image {
      width: 100%;
      height: 250px;
      object-fit: cover;
      display: block;
    }

    .result-card-content {
      padding: 20px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .result-card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(85, 48, 38, 0.2);
    }

    .result-card-name {
      font-family: 'Poppins', sans-serif;
      font-size: 20px;
      color: #553026;
      margin: 0;
      font-weight: 400;
    }

    .result-card-description {
      font-family: 'Poppins', sans-serif;
      font-size: 13px;
      color: #553026;
      line-height: 1.5;
      margin: 0 0 16px 0;
      flex-grow: 1;
    }

    .result-card-tags {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .result-card-tag {
      background: #553026;
      color: #e8dcc8;
      font-family: 'Poppins', sans-serif;
      font-size: 11px;
      padding: 4px 12px;
      border-radius: 20px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .result-card-tag::before {
      content: '✓';
      display: inline-block;
      width: 14px;
      height: 14px;
      background: #e8dcc8;
      color: #553026;
      border-radius: 50%;
      text-align: center;
      line-height: 14px;
      font-size: 10px;
    }

    .result-card-weight {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding: 16px 0;
      border-top: 1px solid rgba(85, 48, 38, 0.2);
      border-bottom: 1px solid rgba(85, 48, 38, 0.2);
      font-family: 'Poppins', sans-serif;
      font-size: 13px;
      color: #553026;
    }

    .result-card-weight-label {
      font-weight: 400;
    }

    .result-card-weight-value {
      font-weight: 500;
    }

    .result-card-button {
      display: block;
      width: 100%;
      padding: 14px 24px;
      background: #553026;
      color: #ffffff;
      border: none;
      border-radius: 4px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      text-decoration: none;
      text-align: center;
    }

    .result-card-button:hover {
      background: #3d2a23;
      transform: translateY(-1px);
    }

    .no-results {
      text-align: center;
      color: #553026;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      padding: 20px;
      opacity: 0.7;
    }

    @media screen and (max-width: 1024px) {
      .results-recommendation {
        grid-template-columns: repeat(2, 1fr);
      }

      .results-title {
        font-size: 36px;
      }
    }

    @media screen and (max-width: 750px) {
      .header-logo {
        top: 25px;
        left: 25px;
      }

      .header-logo img {
        width: 100px;
      }

      .header-button {
        top: 25px;
        right: 25px;
      }

      .header-button a {
        padding: 10px 20px;
        font-size: 14px;
      }

      .lamb-calculator-wrapper {
        padding: 90px 15px 40px 15px;
      }

      .lamb-calculator-container {
        padding: 30px 20px;
      }

      .lamb-icon-wrapper {
        margin-bottom: 15px;
      }

      .lamb-calculator-header {
        margin-bottom: 30px;
      }

      .lamb-calculator-title {
        font-size: 28px;
      }

      .hunger-level-btn {
        font-size: 12px;
        padding: 8px 12px;
        min-width: 80px;
      }

      .results-recommendation {
        display: flex;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        gap: 15px;
        padding-bottom: 20px;
        -webkit-overflow-scrolling: touch;
        padding-left: 15px;
        padding-right: 15px;
      }

      .result-card {
        flex: 0 0 calc(100% - 30px);
        scroll-snap-align: center;
      }

      .result-card-image {
        height: 350px;
      }

      .results-title {
        font-size: 32px;
        margin-bottom: 30px;
      }

      .results-section-wrapper {
        padding: 40px 15px;
      }

      .result-card-image {
        height: 200px;
      }

      .result-card-content {
        padding: 16px;
      }

      .result-card-name {
        font-size: 18px;
      }

      .result-card-description {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>

<section id="lamb-calculator-section">
  <div class="lamb-calculator-wrapper">
    <a href="https://www.urbanlamb.com.au" class="header-logo">
      <img src="mirror/urban_lamb_logo.png" alt="Urban Lamb Logo">
    </a>
    <div class="header-button">
      <a href="https://www.urbanlamb.com.au">HOME</a>
    </div>
    <div class="lamb-calculator-header">
      <div class="lamb-icon-wrapper">
        <div class="lamb-icon-glow"></div>
        <img src="mirror/3d_lamb.png" alt="Lamb Icon" class="lamb-icon">
      </div>
      <h2 class="lamb-calculator-title">Feeding your flock made <em>easy</em>, use our interactive Lamb Calculator.</h2>
    </div>

    <div class="lamb-calculator-container">
      <div class="calculator-input-group">
        <label class="calculator-label" for="people-slider">How many people are you feeding?</label>
        <div class="calculator-slider-container">
          <div class="calculator-slider-fill" id="slider-fill"></div>
          <input type="range" min="1" max="20" value="1" class="calculator-slider" id="people-slider">
          <div class="calculator-value-display" id="people-display">1</div>
        </div>
      </div>

      <div class="calculator-input-group">
        <label class="hunger-level-label">Hunger level</label>
        <div class="hunger-level-buttons">
          <button class="hunger-level-btn" data-level="snack">Snack'n</button>
          <button class="hunger-level-btn active" data-level="regular">Regular</button>
          <button class="hunger-level-btn" data-level="big">Big Eater/s</button>
        </div>
      </div>

      <button class="calculator-button" id="calculate-btn">Calculate</button>
      <button class="calculator-reset" id="reset-btn">Reset</button>
    </div>
  </div>
</section>

<section id="results-section-wrapper" class="results-section-wrapper">
  <div class="results-section-container">
    <h3 class="results-title">What we recommend.</h3>
    <div class="results-recommendation" id="results-grid"></div>
  </div>
</section>

<script>
(function() {
  // Real product database
  const products = {
    'Lambwich': {
      image: 'mirror/cdn/shop/files/square_lambwich.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936486211586',
      servings: 1,
      description: 'Slow Cooked Lamb, Homestyle Tzatziki, Pickled Onion, Rocket Lettuce all on a Lightly Toasted Ciabatta Bun.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '150g'
    },
    'Double Lambwich': {
      image: 'mirror/cdn/shop/files/square_double_lambwich.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936490405890',
      servings: 1,
      description: 'Double Slow Cooked Lamb, Homestyle Tzatziki, Pickled Onion, Rocket Lettuce all on a Lightly Toasted Ciabatta Bun.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '250g'
    },
    'Urban Yiros': {
      image: 'mirror/cdn/shop/files/square_yiors.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936490405888',
      servings: 1,
      description: 'Slow Cooked Lamb, Homestyle Tzatziki, Red Onion, Tomato, Oven Baked Chips all on a Lightly Toasted Pita Bread.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '110g'
    },
    'Lamb Box': {
      image: 'mirror/cdn/shop/files/square_lambbox.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936486211584',
      servings: 1,
      description: '1 x Slow Cooked Lamb Shoulder (single serve)<br>+ Twice Cooked Potatoes<br>1 x Serve Urban Salad<br>2 x Grilled Pita Pieces<br>1 x Serve Homestyle Tzatziki',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '150g'
    },
    'Lamb Shred Box – Reg': {
      image: 'mirror/cdn/shop/files/square_shred_box_reg.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936482017282',
      servings: 1,
      description: '1 x Slow Cooked Lamb Shoulder (shredded)',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '300g'
    },
    'Lamb Shred Box – Med': {
      image: 'mirror/cdn/shop/files/square_shred_box_reg.jpg',
      url: 'https://order.urbanlamb.com.au',
      servings: 2,
      description: '1 x Slow Cooked Lamb Shoulder (shredded)',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '500g'
    },
    'Lamb Shred Box – Lrg': {
      image: 'mirror/cdn/shop/files/Large_Shred.jpg',
      url: 'https://order.urbanlamb.com.au',
      servings: 3,
      description: '1 x Slow Cooked Lamb Shoulder (shredded)',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '700g'
    },
    'Lamb Shred Box – XL (1kg)': {
      image: 'mirror/cdn/shop/files/1kg_shred.jpg',
      url: 'https://order.urbanlamb.com.au',
      servings: 4,
      description: '1 x Slow Cooked Lamb Shoulder (shredded)',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '1kg'
    },
    'Half Lamb': {
      image: 'mirror/cdn/shop/files/square_half_lamb.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936469434370',
      servings: 2,
      description: '1 x Slow Cooked Lamb Shoulder<br>+ Twice Cooked Potatoes<br>*Lamb shredded only.',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '400g'
    },
    'Half Lamb Bundle': {
      image: 'mirror/cdn/shop/files/square_half_lamb_bundle.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936461045762',
      servings: 2,
      description: '1 x Slow Cooked Lamb Shoulder<br>+ Twice Cooked Potatoes<br>1 x Regular Urban Salad<br>1 x Grilled Pita<br>1 x Homestyle Tzatziki<br>*Lamb shredded only.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '400g'
    },
    'Full Lamb': {
      image: 'mirror/cdn/shop/files/square_full_lamb.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936469434368',
      servings: 3,
      description: '1 x Slow Cooked Lamb Shoulder<br>+ Twice Cooked Potatoes<br>*Lamb available as whole or shredded.',
      glutenFree: true,
      dairyFree: true,
      lambWeight: '650g'
    },
    'Full Lamb Bundle': {
      image: 'mirror/cdn/shop/files/square_ful_lamb_bundle.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936461045760',
      servings: 4,
      description: '1 x Slow Cooked Lamb Shoulder<br>+ Twice Cooked Potatoes<br>1 x Large Urban Salad<br>2 x Grilled Pita<br>2 x Homestyle Tzatziki<br>*Lamb available as whole or shredded.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '650g'
    },
    'Ultimate Feast': {
      image: 'mirror/cdn/shop/files/Square_Ultimate_Feast.jpg',
      url: 'https://order.urbanlamb.com.au/pickup/urban-lamb/menus/urban-lamb-order-online?itemId=843255936452657152',
      servings: 6,
      description: '1 x Slow Cooked Lamb Shoulder<br>+ Twice Cooked Potatoes<br>1 x Extra Large Urban Salad<br>4 x Grilled Pita<br>4 x Homestyle Tzatziki<br>*Lamb available as whole or shredded.',
      glutenFree: false,
      dairyFree: false,
      lambWeight: '700g'
    }
  };

  // Recommendations mapping
  const recommendations = {
    1: { snack: ['Urban Yiros'], regular: ['Lambwich', 'Urban Yiros', 'Lamb Box', 'Lamb Shred Box – Reg'], big: ['Double Lambwich'] },
    2: { snack: ['Double Lambwich', 'Lamb Shred Box – Reg'], regular: ['Lambwich', 'Lambwich', 'Urban Yiros', 'Urban Yiros', 'Lamb Box', 'Lamb Box', 'Lamb Shred Box – Med'], big: ['Half Lamb Bundle', 'Double Lambwich', 'Double Lambwich'] },
    3: { snack: ['Lamb Shred Box – Med'], regular: ['Half Lamb', 'Half Lamb Bundle'], big: ['Full Lamb', 'Full Lamb Bundle'] },
    4: { snack: ['Half Lamb'], regular: ['Full Lamb Bundle', 'Lamb Shred Box – Lrg'], big: ['Ultimate Feast'] },
    5: { snack: ['Half Lamb Bundle'], regular: ['Full Lamb Bundle', 'Lamb Shred Box – Lrg'], big: ['Ultimate Feast'] },
    6: { snack: ['Full Lamb', 'Full Lamb Bundle'], regular: ['Ultimate Feast', 'Lamb Shred Box – XL (1kg)'], big: ['Ultimate Feast', 'Lamb Shred Box – Reg'] },
    7: { snack: ['Full Lamb', 'Full Lamb Bundle'], regular: ['Ultimate Feast', 'Lamb Shred Box – Med'], big: ['Ultimate Feast', 'Lamb Shred Box – Med'] },
    8: { snack: ['Lamb Shred Box – XL (1kg)'], regular: ['Ultimate Feast', 'Lamb Shred Box – Med'], big: ['Ultimate Feast', 'Half Lamb Bundle'] },
    9: { snack: ['Ultimate Feast'], regular: ['Ultimate Feast', 'Half Lamb Bundle'], big: ['Ultimate Feast', 'Full Lamb Bundle'] },
    10: { snack: ['Ultimate Feast'], regular: ['Ultimate Feast', 'Full Lamb Bundle'], big: ['Ultimate Feast', 'Ultimate Feast'] },
    11: { snack: ['Ultimate Feast'], regular: ['Ultimate Feast', 'Full Lamb Bundle'], big: ['Ultimate Feast', 'Ultimate Feast', 'Lamb Shred Box – Med'] },
    12: { snack: ['Ultimate Feast', 'Half Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast'], big: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'] },
    13: { snack: ['Ultimate Feast', 'Half Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Lamb Shred Box – Reg'], big: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'] },
    14: { snack: ['Ultimate Feast', 'Half Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb'], big: ['Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'] },
    15: { snack: ['Ultimate Feast', 'Full Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'], big: ['Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'] },
    16: { snack: ['Ultimate Feast', 'Full Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'], big: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast'] },
    17: { snack: ['Ultimate Feast', 'Ultimate Feast'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'], big: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'] },
    18: { snack: ['Ultimate Feast', 'Ultimate Feast'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast'], big: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'] },
    19: { snack: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Lamb Shred Box – Reg'], big: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'] },
    20: { snack: ['Ultimate Feast', 'Ultimate Feast', 'Half Lamb Bundle'], regular: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Lamb Shred Box – Med'], big: ['Ultimate Feast', 'Ultimate Feast', 'Ultimate Feast', 'Full Lamb Bundle'] }
  };

  const slider = document.getElementById('people-slider');
  const display = document.getElementById('people-display');
  const sliderFill = document.getElementById('slider-fill');
  const hungerBtns = document.querySelectorAll('.hunger-level-btn');
  const calculateBtn = document.getElementById('calculate-btn');
  const resetBtn = document.getElementById('reset-btn');
  const resultsSection = document.getElementById('results-section-wrapper');
  const resultsGrid = document.getElementById('results-grid');

  let selectedHungerLevel = 'regular';
  let selectedPeople = 1;

  function updateSliderDisplay() {
    display.textContent = slider.value;
    selectedPeople = parseInt(slider.value);

    const percent = ((slider.value - slider.min) / (slider.max - slider.min)) * 100;
    const sliderWidth = slider.offsetWidth;
    const thumbWidth = 54;
    const availableWidth = sliderWidth - thumbWidth;
    const thumbCenter = (thumbWidth / 2) + ((percent / 100) * availableWidth);

    display.style.left = `${thumbCenter}px`;
    slider.style.background = `linear-gradient(to right, #553026 0%, #553026 ${percent}%, #e8dcc8 ${percent}%, #e8dcc8 100%)`;
  }

  slider.addEventListener('input', updateSliderDisplay);
  setTimeout(updateSliderDisplay, 100);

  const hungerButtonsContainer = document.querySelector('.hunger-level-buttons');
  hungerButtonsContainer.setAttribute('data-active', 'regular');

  hungerBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      hungerBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      selectedHungerLevel = this.dataset.level;
      hungerButtonsContainer.setAttribute('data-active', selectedHungerLevel);
    });
  });

  calculateBtn.addEventListener('click', function() {
    const hungerKey = selectedHungerLevel === 'snack' ? 'snack' : selectedHungerLevel === 'regular' ? 'regular' : 'big';
    const recommendedProducts = recommendations[selectedPeople]?.[hungerKey] || [];

    const productCounts = {};
    recommendedProducts.forEach(productName => {
      productCounts[productName] = (productCounts[productName] || 0) + 1;
    });

    // Update results title with hunger level and products
    const hungerLevelText = selectedHungerLevel === 'snack' ? 'snacky eater' : selectedHungerLevel === 'regular' ? 'regular eater' : 'Big Eater';
    const hungerLevelPlural = selectedPeople > 1 ? hungerLevelText + 's' : hungerLevelText;

    const resultsTitle = document.querySelector('.results-title');

    // Different heading: "the following" for under 6 people OR 6-7 snacky eaters OR 6 regular eaters
    if (selectedPeople < 6 || ((selectedPeople === 6 || selectedPeople === 7) && selectedHungerLevel === 'snack') || (selectedPeople === 6 && selectedHungerLevel === 'regular')) {
      resultsTitle.textContent = `We recommend the following for ${selectedPeople} ${hungerLevelPlural}.`;
    } else {
      // Build product list for title (6+ people, except 6 snacky eaters)
      const productList = Object.entries(productCounts).map(([name, count]) => {
        return count > 1 ? `<strong>${count}</strong> x ${name}` : name;
      }).join(' and ');
      resultsTitle.innerHTML = `We recommend ${productList} for ${selectedPeople} ${hungerLevelPlural}.`;
    }

    if (Object.keys(productCounts).length > 0) {
      resultsGrid.innerHTML = Object.entries(productCounts).map(([productName, quantity]) => {
        const product = products[productName];
        if (!product) return '';

        const tags = [];
        if (product.glutenFree) tags.push('Gluten free');
        if (product.dairyFree) tags.push('Dairy free');

        const tagsHTML = tags.length > 0
          ? `<div class="result-card-tags">${tags.map(tag => `<span class="result-card-tag">${tag}</span>`).join('')}</div>`
          : '';

        return `
          <div class="result-card">
            <img src="${product.image}" alt="${productName}" class="result-card-image" loading="lazy" />
            <div class="result-card-content">
              <div class="result-card-header">
                <h4 class="result-card-name">${quantity > 1 ? quantity + 'x ' : ''}${productName}</h4>
              </div>
              <p class="result-card-description">${product.description}</p>
              ${tagsHTML}
              <div class="result-card-weight">
                <span class="result-card-weight-label">Lamb weight</span>
                <span class="result-card-weight-value">${product.lambWeight}</span>
              </div>
              <a href="${product.url}" class="result-card-button" target="_blank">Order Now</a>
            </div>
          </div>
        `;
      }).filter(card => card !== '').join('');
    } else {
      resultsGrid.innerHTML = '<div class="no-results">No dishes found. Try adjusting your selections.</div>';
    }

    resultsSection.style.display = 'block';
    setTimeout(() => {
      resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }, 100);
  });

  resetBtn.addEventListener('click', function() {
    slider.value = 1;
    selectedPeople = 1;
    hungerBtns.forEach(b => b.classList.remove('active'));
    hungerBtns[1].classList.add('active');
    selectedHungerLevel = 'regular';
    resultsSection.style.display = 'none';
    resultsGrid.innerHTML = '';
    updateSliderDisplay();
  });
})();
</script>

</body>
</html>
